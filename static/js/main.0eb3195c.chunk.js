(this["webpackJsonpreact-testing"]=this["webpackJsonpreact-testing"]||[]).push([[0],{24:function(e,t,i){},25:function(e,t,i){},47:function(e,t,i){"use strict";i.r(t);var c=i(1),s=i.n(c),n=i(17),a=i.n(n),r=(i(24),i(19)),l=i(2),o=(i(25),i(26),i(0)),d=function(e){var t=e.searchTerm,i=e.setSearchTerm;return Object(o.jsx)("div",{className:"field-group",children:Object(o.jsx)("label",{className:"d-block",children:Object(o.jsx)("input",{className:"form-control",type:"text",value:t,name:"term",placeholder:"Search term",onChange:function(e){i(e.target.value)}})})})},j=function(e){var t=e.genre;return Object(o.jsx)("option",{name:t.name,value:t.id,children:t.name},t.id)},u=i(8),b=i.n(u),m=i(18),h=i(4),v=i.n(h),O=function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://api.themoviedb.org/3/genre/movie/list?api_key=b3a999b7703140535e95baeff2e338fa&language=en-US");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),i=t[0],s=t[1];return Object(c.useEffect)((function(){O().then((function(e){s(e.data.genres)}))}),[]),Object(o.jsx)("div",{className:"field-group mb-2",children:Object(o.jsxs)("select",{defaultValue:"all",className:"form-control",children:[Object(o.jsx)("option",{name:"all",value:"all",children:"All"},0),i.map((function(e){return Object(o.jsx)(j,{genre:e},e.id)}))]})})},x=function(e){return v.a.get("https://api.themoviedb.org/3/search/movie?api_key=b3a999b7703140535e95baeff2e338fa&query=".concat(e)).then((function(e){return e.data.results.sort((function(e,t){var i=new Date(e.release_date);return new Date(t.release_date).getTime()-i.getTime()}))}))},p=function(e,t){var i=parseInt(t);return e.filter((function(e){return e.genre_ids.indexOf(i)>-1}))},g=function(e){var t=e.setMovies,i=Object(c.useState)(""),s=Object(l.a)(i,2),n=s[0],a=s[1],r=Object(c.useState)(!0),j=Object(l.a)(r,2),u=j[0],b=j[1];Object(c.useEffect)((function(){b(!n)}),[n]);return Object(o.jsxs)("form",{className:"movie-search-form",onSubmit:function(e){var i=e.target[0],c=e.target[1];x(c.value).then((function(e){var c=e;"all"!==i.value&&(c=p(e,i.value)),t(c)})),e.preventDefault()},children:[Object(o.jsx)(f,{}),Object(o.jsx)(d,{searchTerm:n,setSearchTerm:a}),Object(o.jsx)("div",{className:"field-group",children:Object(o.jsx)("button",{disabled:u,className:"btn btn-primary",type:"submit",children:"Search"})})]})},N=function(e){var t=e.detailsExpanded,i=e.movie,c=e.similarMovies,s=e.setModalMovie,n="movie-list-entry-details";return t||(n+=" collapse"),Object(o.jsx)("div",{id:"MovieListEntry"+i.id,className:n,children:Object(o.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(o.jsx)("img",{src:"https://image.tmdb.org/t/p/original/"+i.poster_path}),Object(o.jsxs)("div",{className:"px-4 pb-4",children:[Object(o.jsx)("p",{children:i.overview}),Object(o.jsx)("button",{className:"btn btn-link",onClick:function(){return s(i)},children:"View More Details"}),c.length>0&&Object(o.jsxs)("div",{children:[Object(o.jsx)("hr",{}),Object(o.jsx)("h5",{children:"Similar Movies"}),Object(o.jsx)("div",{className:"similar-movies row",children:c.filter((function(e,t){return t<6})).map((function(e){return Object(o.jsx)("div",{className:"col-auto",children:Object(o.jsx)("img",{src:"https://image.tmdb.org/t/p/original/"+e.poster_path,width:"100px",onClick:function(){return s(e)}})},e.id)}))})]})]})]})})},M=function(e){return v.a.get("https://api.themoviedb.org/3/movie/".concat(e.id,"/similar?api_key=b3a999b7703140535e95baeff2e338fa")).then((function(e){return e.data.results}))},w=function(e){var t=e.movie,i=e.addMovieToWatchlist,s=e.setModalMovie,n=Object(c.useState)([]),a=Object(l.a)(n,2),r=a[0],d=a[1],j=Object(c.useState)(!1),u=Object(l.a)(j,2),b=u[0],m=u[1],h=new Date(t.release_date);h=h.getFullYear();return Object(c.useEffect)((function(){M(t).then((function(e){d(e)}))}),[]),Object(o.jsxs)("li",{className:"list-group-item",children:[Object(o.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(o.jsx)("button",{className:"btn btn-link mb-0",onClick:function(e){m(!b)},children:t.title+" ("+h+")"}),Object(o.jsx)("button",{className:"add-to-watchlist btn btn-link",onClick:function(){i(t)},children:"+ Watchlist"})]}),Object(o.jsx)(N,{detailsExpanded:b,movie:t,similarMovies:r,setModalMovie:s})]},t.id)},k=function(e){var t=e.movies,i=e.addMovieToWatchlist,c=e.setModalMovie;return Object(o.jsx)("div",{className:"mt-3",children:t.length?Object(o.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(o.jsx)(w,{movie:e,addMovieToWatchlist:i,setModalMovie:c},e.id)}))}):Object(o.jsx)("p",{children:"No results"})})},S=function(e){var t=e.addMovieToWatchlist,i=e.setModalMovie,s=Object(c.useState)([]),n=Object(l.a)(s,2),a=n[0],r=n[1];return Object(o.jsxs)("div",{className:"movie-search p-4 rounded",children:[Object(o.jsx)("h2",{className:"mb-3",children:"Movie Search"}),Object(o.jsx)(g,{setMovies:r}),Object(o.jsx)(k,{movies:a,addMovieToWatchlist:t,setModalMovie:i})]})},y=function(e){var t=e.detailsExpanded,i=e.movie,c="movie-list-entry-details";return t||(c+=" collapse"),Object(o.jsxs)("div",{id:"MovieListEntry"+i.id,className:c,children:[Object(o.jsx)("img",{src:"https://image.tmdb.org/t/p/original/"+i.poster_path}),Object(o.jsx)("p",{children:i.overview})]})},T=function(e){var t=e.movie,i=e.removeMovieFromWatchlist,s=Object(c.useState)(!1),n=Object(l.a)(s,2),a=n[0],r=n[1],d=new Date(t.release_date);d=d.getFullYear();return Object(o.jsxs)("li",{className:"list-group-item",children:[Object(o.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(o.jsx)("button",{className:"d-inline btn btn-link mb-0",onClick:function(e){r(!a)},children:t.title+" ("+d+")"}),Object(o.jsx)("button",{className:"remove-from-watchlist d-inline btn btn-link",onClick:function(){return i(t)},children:"Remove"})]}),Object(o.jsx)(y,{detailsExpanded:a,movie:t})]},t.id)},W=function(e){var t=e.movies,i=e.removeMovieFromWatchlist;return Object(o.jsx)("div",{className:"mt-3",children:t.length?Object(o.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(o.jsx)(T,{movie:e,removeMovieFromWatchlist:i},e.id)}))}):Object(o.jsx)("p",{children:"No results"})})},_=function(e){var t=e.movies,i=e.removeMovieFromWatchlist;return Object(o.jsxs)("div",{className:"watchlist p-4 rounded",children:[Object(o.jsx)("h2",{className:"mb-3",children:"Watchlist"}),Object(o.jsx)(W,{movies:t,removeMovieFromWatchlist:i})]})},C=function(e){var t=e.movie,i=e.setModalMovie;return console.log(t),Object(o.jsx)("div",{className:"movie-modal-container",children:Object(o.jsxs)("div",{className:"movie-modal",children:[Object(o.jsxs)("div",{className:"movie-modal-header",children:[Object(o.jsx)("button",{className:"movie-modal-close",onClick:function(){return i(null)},children:"X"}),Object(o.jsx)("h1",{children:t.title}),Object(o.jsx)("img",{className:"backdrop-image",src:"https://image.tmdb.org/t/p/original/"+t.backdrop_path,width:"100%",height:"auto"})]}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-5",children:Object(o.jsx)("img",{className:"movie-modal-poster",src:"https://image.tmdb.org/t/p/original/"+t.poster_path,width:"100%",height:"auto"})}),Object(o.jsxs)("div",{className:"col-7",children:[Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Release date:"})," ",t.release_date]}),Object(o.jsx)("p",{children:t.overview})]})]})]})})};var F=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),i=t[0],s=t[1],n=Object(c.useState)(null),a=Object(l.a)(n,2),d=a[0],j=a[1];return Object(o.jsxs)("div",{className:"App",children:[d&&Object(o.jsx)(C,{movie:d,setModalMovie:j}),Object(o.jsx)("header",{className:"main-header",children:Object(o.jsxs)("h1",{children:[Object(o.jsx)("strong",{children:"cherryCordial: "}),"Movie db"]})}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-7",children:Object(o.jsx)(S,{addMovieToWatchlist:function(e){i.includes(e)||s((function(t){return[].concat(Object(r.a)(t),[e])}))},setModalMovie:j})}),Object(o.jsx)("div",{className:"col-5",children:Object(o.jsx)(_,{movies:i,removeMovieFromWatchlist:function(e){s(i.filter((function(t){return t.id!==e.id})))}})})]})]})},E=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,48)).then((function(t){var i=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,a=t.getTTFB;i(e),c(e),s(e),n(e),a(e)}))};a.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(F,{})}),document.getElementById("root")),E()}},[[47,1,2]]]);
//# sourceMappingURL=main.0eb3195c.chunk.js.map