(this["webpackJsonpreact-testing"]=this["webpackJsonpreact-testing"]||[]).push([[0],{24:function(e,t,c){},25:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var i=c(1),n=c.n(i),s=c(18),a=c.n(s),r=(c(24),c(19)),o=c(2),l=(c(25),c(26),c(0)),d=function(e){var t=e.searchTerm,c=e.setSearchTerm;return Object(l.jsx)("div",{className:"field-group",children:Object(l.jsx)("label",{className:"d-block",children:Object(l.jsx)("input",{className:"form-control",type:"text",value:t,name:"term",placeholder:"Search term",onChange:function(e){c(e.target.value)}})})})},j=function(e){var t=e.genre;return Object(l.jsx)("option",{name:t.name,value:t.id,children:t.name},t.id)},u=c(5),b=c.n(u),m=c(8),h=c(4),v=c.n(h),O=function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://api.themoviedb.org/3/genre/movie/list?api_key=b3a999b7703140535e95baeff2e338fa&language=en-US");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1];return Object(i.useEffect)((function(){O().then((function(e){n(e.data.genres)}))}),[]),Object(l.jsx)("div",{className:"field-group mb-2",children:Object(l.jsxs)("select",{defaultValue:"all",className:"form-control",children:[Object(l.jsx)("option",{name:"all",value:"all",children:"All"},0),c.map((function(e){return Object(l.jsx)(j,{genre:e},e.id)}))]})})},x=function(e){return v.a.get("https://api.themoviedb.org/3/search/movie?api_key=b3a999b7703140535e95baeff2e338fa&query=".concat(e)).then((function(e){return e.data.results.sort((function(e,t){var c=new Date(e.release_date);return new Date(t.release_date).getTime()-c.getTime()}))}))},p=function(e,t){var c=parseInt(t);return e.filter((function(e){return e.genre_ids.indexOf(c)>-1}))},g=function(e){var t=e.setMovies,c=Object(i.useState)(""),n=Object(o.a)(c,2),s=n[0],a=n[1],r=Object(i.useState)(!0),j=Object(o.a)(r,2),u=j[0],b=j[1];Object(i.useEffect)((function(){b(!s)}),[s]);return Object(l.jsxs)("form",{className:"movie-search-form",onSubmit:function(e){var c=e.target[0],i=e.target[1];x(i.value).then((function(e){var i=e;"all"!==c.value&&(i=p(e,c.value)),t(i)})),e.preventDefault()},children:[Object(l.jsx)(f,{}),Object(l.jsx)(d,{searchTerm:s,setSearchTerm:a}),Object(l.jsx)("div",{className:"field-group",children:Object(l.jsx)("button",{disabled:u,className:"btn btn-primary",type:"submit",children:"Search"})})]})},N=function(e){var t=e.detailsExpanded,c=e.movie,i=e.similarMovies,n=e.setModalMovie,s="movie-list-entry-details";return t||(s+=" collapse"),Object(l.jsx)("div",{id:"MovieListEntry"+c.id,className:s,children:Object(l.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(l.jsx)("img",{src:"https://image.tmdb.org/t/p/original/"+c.poster_path}),Object(l.jsxs)("div",{className:"px-4 pb-4",children:[Object(l.jsx)("p",{children:c.overview}),Object(l.jsx)("button",{className:"btn btn-link",onClick:function(){return n(c)},children:"View More Details"}),i.length>0&&Object(l.jsxs)("div",{children:[Object(l.jsx)("hr",{}),Object(l.jsx)("h5",{children:"Similar Movies"}),Object(l.jsx)("div",{className:"similar-movies row",children:i.filter((function(e,t){return t<6})).map((function(e){return Object(l.jsx)("div",{className:"col-auto",children:Object(l.jsx)("img",{src:"https://image.tmdb.org/t/p/original/"+e.poster_path,width:"100px",onClick:function(){return n(e)}})},e.id)}))})]})]})]})})},M=function(e){return v.a.get("https://api.themoviedb.org/3/movie/".concat(e.id,"/similar?api_key=b3a999b7703140535e95baeff2e338fa")).then((function(e){return e.data.results}))},w=function(e){var t=e.movie,c=e.addMovieToWatchlist,n=e.setModalMovie,s=Object(i.useState)([]),a=Object(o.a)(s,2),r=a[0],d=a[1],j=Object(i.useState)(!1),u=Object(o.a)(j,2),b=u[0],m=u[1],h=new Date(t.release_date);h=h.getFullYear();return Object(i.useEffect)((function(){M(t).then((function(e){d(e)}))}),[]),Object(l.jsxs)("li",{className:"list-group-item",children:[Object(l.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(l.jsx)("button",{className:"btn btn-link mb-0",onClick:function(e){m(!b)},children:t.title+" ("+h+")"}),Object(l.jsx)("button",{className:"add-to-watchlist btn btn-link",onClick:function(){c(t)},children:"+ Watchlist"})]}),Object(l.jsx)(N,{detailsExpanded:b,movie:t,similarMovies:r,setModalMovie:n})]},t.id)},k=function(e){var t=e.movies,c=e.addMovieToWatchlist,i=e.setModalMovie;return Object(l.jsx)("div",{className:"movie-search-list mt-3",children:t.length?Object(l.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(l.jsx)(w,{movie:e,addMovieToWatchlist:c,setModalMovie:i},e.id)}))}):Object(l.jsx)("p",{children:"No results"})})},S=function(e){var t=e.addMovieToWatchlist,c=e.setModalMovie,n=Object(i.useState)([]),s=Object(o.a)(n,2),a=s[0],r=s[1];return Object(l.jsxs)("div",{className:"movie-search p-4 rounded",children:[Object(l.jsx)("h2",{className:"mb-3",children:"Movie Search"}),Object(l.jsx)(g,{setMovies:r}),Object(l.jsx)(k,{movies:a,addMovieToWatchlist:t,setModalMovie:c})]})},y=function(e){var t=e.detailsExpanded,c=e.movie,i="movie-list-entry-details";return t||(i+=" collapse"),Object(l.jsxs)("div",{id:"MovieListEntry"+c.id,className:i,children:[Object(l.jsx)("img",{src:"https://image.tmdb.org/t/p/original/"+c.poster_path}),Object(l.jsx)("p",{children:c.overview})]})},_=function(e){var t=e.movie,c=e.removeMovieFromWatchlist,n=Object(i.useState)(!1),s=Object(o.a)(n,2),a=s[0],r=s[1],d=new Date(t.release_date);d=d.getFullYear();return Object(l.jsxs)("li",{className:"list-group-item",children:[Object(l.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(l.jsx)("button",{className:"d-inline btn btn-link mb-0",onClick:function(e){r(!a)},children:t.title+" ("+d+")"}),Object(l.jsx)("button",{className:"remove-from-watchlist d-inline btn btn-link",onClick:function(){return c(t)},children:"Remove"})]}),Object(l.jsx)(y,{detailsExpanded:a,movie:t})]},t.id)},T=function(e){var t=e.movies,c=e.removeMovieFromWatchlist;return Object(l.jsx)("div",{className:"mt-3",children:t.length?Object(l.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(l.jsx)(_,{movie:e,removeMovieFromWatchlist:c},e.id)}))}):Object(l.jsx)("p",{children:"No results"})})},W=function(e){var t=e.movies,c=e.removeMovieFromWatchlist;return Object(l.jsxs)("div",{className:"watchlist p-4 rounded",children:[Object(l.jsx)("h2",{className:"mb-3",children:"Watchlist"}),Object(l.jsx)(T,{movies:t,removeMovieFromWatchlist:c})]})},C=function(e){var t=e.cast;return Object(l.jsxs)("div",{children:[Object(l.jsx)("h5",{children:"Cast"}),t.filter((function(e,t){return t<10})).map((function(e){return Object(l.jsx)("div",{children:Object(l.jsxs)("p",{children:[e.character,Object(l.jsx)("br",{}),Object(l.jsx)("strong",{children:e.name})]})},e.id)}))]})},F=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://api.themoviedb.org/3/movie/".concat(t,"/credits?api_key=b3a999b7703140535e95baeff2e338fa"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){var t=e.movie,c=e.setModalMovie,n=Object(i.useState)([]),s=Object(o.a)(n,2),a=s[0],r=s[1];return Object(i.useEffect)((function(){F(t.id).then((function(e){console.log(e.data.cast),r(e.data.cast)}))}),[]),Object(l.jsx)("div",{className:"movie-modal-container",children:Object(l.jsxs)("div",{className:"movie-modal",children:[Object(l.jsxs)("div",{className:"movie-modal-header",children:[Object(l.jsx)("button",{className:"movie-modal-close",onClick:function(){return c(null)},children:"X"}),Object(l.jsx)("h1",{children:t.title}),Object(l.jsx)("img",{className:"backdrop-image",src:"https://image.tmdb.org/t/p/original/"+t.backdrop_path,width:"100%",height:"auto"})]}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-5",children:Object(l.jsx)("img",{className:"movie-modal-poster",src:"https://image.tmdb.org/t/p/original/"+t.poster_path,width:"100%",height:"auto"})}),Object(l.jsxs)("div",{className:"col-7",children:[Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Release date:"})," ",t.release_date]}),Object(l.jsx)("p",{children:t.overview}),Object(l.jsx)(C,{cast:a})]})]})]})})};var D=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1],s=Object(i.useState)(null),a=Object(o.a)(s,2),d=a[0],j=a[1];return Object(l.jsxs)("div",{className:"App",children:[d&&Object(l.jsx)(E,{movie:d,setModalMovie:j}),Object(l.jsx)("header",{className:"main-header",children:Object(l.jsxs)("h1",{children:[Object(l.jsx)("strong",{children:"cherryCordial: "}),"Movie db"]})}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-7",children:Object(l.jsx)(S,{addMovieToWatchlist:function(e){c.includes(e)||n((function(t){return[].concat(Object(r.a)(t),[e])}))},setModalMovie:j})}),Object(l.jsx)("div",{className:"col-5",children:Object(l.jsx)(W,{movies:c,removeMovieFromWatchlist:function(e){n(c.filter((function(t){return t.id!==e.id})))}})})]})]})},L=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,48)).then((function(t){var c=t.getCLS,i=t.getFID,n=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),i(e),n(e),s(e),a(e)}))};a.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(D,{})}),document.getElementById("root")),L()}},[[47,1,2]]]);
//# sourceMappingURL=main.8d97de44.chunk.js.map